---
title: "1.4 Create MSDF Matrices"
---

# Session info
```{r}
### Home PC

## RStudio version
# RStudio 2023.09.1+494 "Desert Sunflower" Release (cd7011dce393115d3a7c3db799dda4b1c7e88711, 2023-10-16) for windows Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) RStudio/2023.09.1+494 Chrome/116.0.5845.190 Electron/26.2.4 Safari/537.36

## sessionInfo()
#R version 4.3.1 (2023-06-16 ucrt)
#Platform: x86_64-w64-mingw32/x64 (64-bit)
#Running under: Windows 10 x64 (build 19045)
#
#Matrix products: default
#
#
#locale:
#[1] LC_COLLATE=English_United Kingdom.utf8  LC_CTYPE=English_United Kingdom.utf8    LC_MONETARY=English_United Kingdom.utf8 LC_NUMERIC=C                            LC_TIME=English_United Kingdom.utf8    
#
#time zone: Europe/London
#tzcode source: internal
#
#other attached packages:
# [1] haven_2.5.3     stringi_1.7.12  readxl_1.4.3    lubridate_1.9.3 forcats_1.0.0   stringr_1.5.0   dplyr_1.1.3     purrr_1.0.2     readr_2.1.4     tidyr_1.3.0     tibble_3.2.1   
#[12] ggplot2_3.4.4   tidyverse_2.0.0
#
#loaded via a namespace (and not attached):
# [1] gtable_0.3.4      compiler_4.3.1    tidyselect_1.2.0  scales_1.3.0      yaml_2.3.7        fastmap_1.1.1     R6_2.5.1          generics_0.1.3    knitr_1.45        munsell_0.5.0    
#[11] pillar_1.9.0      tzdb_0.4.0        rlang_1.1.1       utf8_1.2.4        xfun_0.40         timechange_0.2.0  cli_3.6.1         withr_2.5.2       magrittr_2.0.3    digest_0.6.33    
#[21] grid_4.3.1        rstudioapi_0.15.0 hms_1.1.3         lifecycle_1.0.4   vctrs_0.6.4       evaluate_0.23     glue_1.6.2        cellranger_1.1.0  fansi_1.0.5       colorspace_2.1-0 
#[31] rmarkdown_2.25    tools_4.3.1       pkgconfig_2.0.3   htmltools_0.5.6.1



### fireworks

## RStudio version
# RStudio 2023.12.1+402 "Ocean Storm" Release (4da58325ffcff29d157d9264087d4b1ab27f7204, 2024-01-28) for windows Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) RStudio/2023.12.1+402 Chrome/116.0.5845.190 Electron/26.2.4 Safari/537.36

## sessionInfo()
#R version 4.3.2 (2023-10-31 ucrt)
#Platform: x86_64-w64-mingw32/x64 (64-bit)
#Running under: Windows 11 x64 (build 22621)
#
#Matrix products: default
#
#
#locale:
#[1] LC_COLLATE=English_United Kingdom.utf8  LC_CTYPE=English_United Kingdom.utf8    LC_MONETARY=English_United Kingdom.utf8 LC_NUMERIC=C                           
#[5] LC_TIME=English_United Kingdom.utf8    
#
#time zone: Europe/London
#tzcode source: internal
#
#attached base packages:
#[1] stats     graphics  grDevices utils     datasets  methods   base     
#
#other attached packages:
# [1] haven_2.5.4     stringi_1.8.3   readxl_1.4.3    lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5     tidyr_1.3.1     tibble_3.2.1   
#[12] ggplot2_3.4.4   tidyverse_2.0.0
#
#loaded via a namespace (and not attached):
# [1] gtable_0.3.4      compiler_4.3.2    tidyselect_1.2.0  scales_1.3.0      yaml_2.3.8        fastmap_1.1.1     R6_2.5.1          generics_0.1.3    knitr_1.45        munsell_0.5.0    
#[11] pillar_1.9.0      tzdb_0.4.0        rlang_1.1.3       utf8_1.2.4        xfun_0.42         timechange_0.3.0  cli_3.6.2         withr_3.0.0       magrittr_2.0.3    digest_0.6.34    
#[21] grid_4.3.2        rstudioapi_0.15.0 hms_1.1.3         lifecycle_1.0.4   vctrs_0.6.5       evaluate_0.23     glue_1.7.0        cellranger_1.1.0  fansi_1.0.6       colorspace_2.1-0 
#[31] rmarkdown_2.25    tools_4.3.2       pkgconfig_2.0.3   htmltools_0.5.7  



### Laptop

## RStudio version 
# 2023.09.1+494 "Desert Sunflower" Release (cd7011dce393115d3a7c3db799dda4b1c7e88711, 2023-10-16) for windows Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) RStudio/2023.09.1+494 Chrome/116.0.5845.190 Electron/26.2.4 Safari/537.36

## sessionInfo()
#
```

# Import packages
```{r}
library(tidyverse)
library(readxl)
library(stringi)
library(haven)
sessionInfo()
```

# Define rootpaths (please add additional rootpaths that fit your PC, then hashtag out mine, rather than deleting them)
```{r}
#ghp = "C:/Users/sgmmahon/Documents/GitHub/timely/"
ghp = "C:/Users/micha/OneDrive/Documents/GitHub/timely/"
dp  = "//rfs01/rdm01/Timely/data/"
lp  = "_lookups/"
mtp = "_matrices/"
olp = "_outliers/"
cnp = "census/"
csp = "casen/"
erp = "electoral-roll/"
msp = "msdf/"
twp = "twitter/"
vfp = "vector-files/"
ptp = "manuscript/plots/"
scp = "1_scatter_plots/"
bcp = "2_bar_charts/"
hmp = "3_heatmaps/"
crp = "4_correlation_plots/"
hbp = "5_hybrid_plots/"
tbp = "6_tables/"
mcp = "7_misc/"
aap = "8_additional_analysis/"
mfp = "1_migration_flow/"
omp = "2_out_migration/"
imp = "3_in_migration/"
nmp = "4_net_migration/"
pfp = "5_proportion_of_migration_flow/"
smp = "_supplementary_materials/"
```

# Import data
```{r}
# Import MSDF data
ms_2018_2019 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  1)
ms_2018_2020 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  2)
ms_2018_2021 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  3)
ms_2018_2022 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  4)
ms_2019_2020 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  5)
ms_2019_2021 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  6)
ms_2019_2022 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  7)
ms_2020_2021 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  8)
ms_2020_2022 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet =  9)
ms_2021_2022 = read_excel(paste0(dp,msp,"migracion_interna_enviado_FRowe.xlsx"), sheet = 10)

# Import lookup tables
lkp    = read.csv(paste0(dp,lp,"chile_comuna_provincia_region_lookup_table.csv"))

# Create origin and destination lookup tables for separate joins
lkp_og = lkp %>% setNames(c("Origin"     ,"ogp","ogr"))
lkp_dn = lkp %>% setNames(c("Destination","dnp","dnr"))
```



# Create and save matrices
```{r}
# Function that converts non-English letters to English letters
cv_ltrs <- function(s) {

   # 1 character substitutions
   old1 <- "ÀÁÂÃÄÅÇÐÈÉÊËÌÍÎÏÑÒÓÔÕÖŠÙÚÛÜÝŸÞŽàáâãäåçðèéêëìíîïñòóôõöšùúûüýÿþž’"
   new1 <- "AAAAAACDEEEEIIIINOOOOOSUUUUYYYZaaaaaacdeeeeiiiinooooosuuuuyyyz'"
   s1 <- chartr(old1, new1, s)

   # 2 character substitutions
   old2 <- c("œ", "ß", "æ", "ø")
   new2 <- c("oe", "ss", "ae", "oe")
   s2 <- s1
   for(i in seq_along(old2)) s2 <- gsub(old2[i], new2[i], s2, fixed = TRUE)
   
   # Return sunstituted string
   return(s2)
}

# Function that assigns geographies with multiple spellings a consistent name
rnm_geogs = function(vec,geog) {
  
  if (geog == "circunscripcion" | geog == "cr") {
    
    # Remove backslashes
    vec = vec %>% map(~ gsub("\\\\","",.)) %>% unlist()
    
    # Ifelse statements that reassign cicunscripcion names
    vec = ifelse(vec == "Tolten", "Nueva Tolten", vec)
  
  } else if (geog == "comuna" | geog == "cm") {
  
    # Ifelse statements that reassign comuna names
    vec = ifelse(vec == "Aisen"                         , "Aysen"              ,
          ifelse(vec == "Coihayque"                     , "Coyhaique"          ,
          ifelse(vec == "Coihaique"                     , "Coyhaique"          ,
          ifelse(vec == "El Olivar"                     , "Olivar"             ,
          ifelse(vec == "Marchihue"                     , "Marchigue"          ,
          ifelse(vec == "Cabo De Hornos(Ex-Navarino)"   , "Cabo De Hornos"     ,
          ifelse(vec == "Cabo De Hornos (Ex 0 Navarino)", "Cabo De Hornos"     ,
          ifelse(vec == "Trehuaco"                      , "Treguaco"           ,
          ifelse(vec == "O’higgins"                     , "O'higgins"          ,
          ifelse(vec == "O Higgins"                     , "O'higgins"          ,
          ifelse(vec == "Conchali, Region Metropolitana", "Conchali"           ,
          ifelse(vec == "Puerto Saavedra"               , "Saavedra"           ,
          ifelse(vec == "San Pedro De Melipilla"        , "San Pedro"          ,
          ifelse(vec == "La Calera"                     , "Calera"             ,
          ifelse(vec == "Santiago Centro"               , "Santiago"           ,
          ifelse(vec == "Pedo Aguirre Cerda"            , "Pedro Aguirre Cerda",
                 vec))))))))))))))))
  
  } else if (geog == "provincia" | geog == "pr") {
  
    # Ifelse statements that reassign provincia names
    vec = ifelse(vec == "Aisen"            , "Aysen"           ,
          ifelse(vec == "Coihayque"        , "Coyhaique"       ,
          ifelse(vec == "Coihaique"        , "Coyhaique"       ,
          ifelse(vec == "Bio-Bio"          , "Biobio"          ,
          ifelse(vec == "Ãšltima Esperanza", "Ultima Esperanza",
                 vec)))))
    
  } else if (geog == "region" | geog == "rg") {
  
    # Ifelse statements that reassign provincia names
    vec = ifelse(vec == "Aysen Del General Carlos Ibanez Del Campo", "Aysen"               ,
          ifelse(vec == "Libertador Bernardo O'higgins"            , "O'higgins"           ,
          ifelse(vec == "Libertador Bernardo O’higgins"            , "O'higgins"           ,
          ifelse(vec == "Libertador General Bernardo O'higgins"    , "O'higgins"           ,
          ifelse(vec == "O'Higgins"                                , "O'higgins"           ,
          ifelse(vec == "Bio Bio"                                  , "Biobio"              ,
          ifelse(vec == "Metropolitana"                            , "Region Metropolitana",
          ifelse(vec == "Metropolitana De Santiago"                , "Region Metropolitana",
          ifelse(vec == "Magallanes Y La Antartica Chilena"        , "Magallanes"          ,
          ifelse(vec == "Magallanes Y De La Antartica Chilena"     , "Magallanes"          ,
                 vec))))))))))
    
  }
  
  # Return altered vector
  return(vec)
}

# Function that formats the names of origin and destination geographies (i.e. comuna, provincia, region) in a consistent way
frmt_geog_nms = function(vec,geog) {
  vec %>% tolower() %>% stri_trans_totitle() %>% cv_ltrs() %>% rnm_geogs(geog = geog)
}

# Funcion to clean baseline dataframe, to derive comuna, provincia and region matrices from
cln_sheet = function(df,syr,eyr,elr=F) {
  
  # Clean baseline dataframe, to derive comuna, provincia and region matrices from
  df = df %>% select("inm_2022...12",paste0("sexo_",syr,"...13"),paste0("tedad_",syr,"...14"),paste0("comuna_",syr,"...17"),paste0("comuna_",eyr,"...22"),"migracion") %>% 
              setNames(c("nationality","sex","age","Origin","Destination","migration")) %>%
              mutate(Origin      = Origin      %>% frmt_geog_nms("cm"),
                     Destination = Destination %>% frmt_geog_nms("cm"),
                     sex = ifelse(sex == "Masculino", "Male",
                           ifelse(sex == "Femenino" , "Female", NA))) %>% 
              filter(!is.na(Origin) & !is.na(Destination)) %>% 
              full_join(lkp_og) %>% full_join(lkp_dn) %>% 
              .[,c(4:5,2,3,7:10,6)] %>% rename("value" = "migration")
  
  # If comparing data to electoral role
  if (elr) {
    df = df %>% filter(age == "15-29" | age == "30-59" | age == "60-más")
  }
  
  # Return cleaned dataframe
  return(df)
}

# Function that adds origin and destination values not within survey and returns correctly formatted matrix
get_mtr = function(df,geog) {
  
  # Define long-form name of geography
  if (geog == "cm") {
    geo = "comuna"
  } else if (geog == "pr") {
    geo = "provincia"
  } else if (geog == "rg") {
    geo = "region"
  }
  
  # Use expand.grid() to generate all possible combinations
  lkp_od = expand.grid(unique(lkp[[geo]]),unique(lkp[[geo]])) %>% 
           mutate(od = apply(., 1, paste, collapse = "~"), value = 0) %>% .[,c(3,1,2,4)] %>% 
           setNames(c("od","Origin","Destination","value"))
  
  # Define ods which were not capured in Casen dataset and set to 0
  lkp_od_sub = lkp_od %>% filter(!(od %in% df$od))
  
  # Add empty OD cells to casen data and convert to matrix
  mtr = rbind(df,lkp_od_sub) %>% arrange(od) %>% select(-od) %>%
        pivot_wider(names_from = "Destination", values_from = "value") %>% 
        arrange(Origin) %>% select(c("Origin",.$Origin)) %>%
        column_to_rownames("Origin") %>% 
        as.matrix(ncol = ncol(.), dimnames = dimnames(.))
  
  # Return matrix
  return(mtr)
}

# Function that formats dataframe before sending it to get_mtr() to convert to a migration matrix
frmt_mtr = function(df,geog) {
  
  # Define origin and destination columns based on whether looking at comunas. provincias or regions
  if (geog == "cm") {
    og = "Origin"
    dn = "Destination"
  } else if (geog == "pr") {
    og = "ogp"
    dn = "dnp"
  } else if (geog == "rg") {
    og = "ogr"
    dn = "dnr"
  }
  
  # Formats dataframe before sending it to get_mtr() to convert to a migration matrix
  mtr = df %>% .[,c(og,dn,"value")] %>% 
               setNames(c("Origin","Destination","value")) %>%
               mutate(od = paste0(Origin,"~",Destination)) %>% group_by(od) %>% 
               summarise(Origin      = unique(Origin     ), 
                         Destination = unique(Destination), 
                         value       = sum(value)) %>% 
               get_mtr(geog)
  
  # Return migration matrix
  return(mtr)
}



# Get baseline dataframe, to derive comuna, provincia and region matrices from
cmdf_2018_2019 = cln_sheet(ms_2018_2019,"2018","2019")
cmdf_2018_2020 = cln_sheet(ms_2018_2020,"2018","2020")
cmdf_2018_2021 = cln_sheet(ms_2018_2021,"2018","2021")
cmdf_2018_2022 = cln_sheet(ms_2018_2022,"2018","2022")
cmdf_2019_2020 = cln_sheet(ms_2019_2020,"2019","2020")
cmdf_2019_2021 = cln_sheet(ms_2019_2021,"2019","2021")
cmdf_2019_2022 = cln_sheet(ms_2019_2022,"2019","2022")
cmdf_2020_2021 = cln_sheet(ms_2020_2021,"2020","2021")
cmdf_2020_2022 = cln_sheet(ms_2020_2022,"2020","2022")
cmdf_2021_2022 = cln_sheet(ms_2021_2022,"2021","2022")
# Additional dataframe that removes everyone under 15, so can be better compared to electoral role
cmde_2018_2020 = cln_sheet(ms_2018_2020,"2018","2020", elr = T)



# Get all comuna matrices
cm_all_2018_2019 = cmdf_2018_2019 %>% frmt_mtr("cm")
cm_all_2018_2020 = cmdf_2018_2020 %>% frmt_mtr("cm")
cm_all_2018_2021 = cmdf_2018_2021 %>% frmt_mtr("cm")
cm_all_2018_2022 = cmdf_2018_2022 %>% frmt_mtr("cm")
cm_all_2019_2020 = cmdf_2019_2020 %>% frmt_mtr("cm")
cm_all_2019_2021 = cmdf_2019_2021 %>% frmt_mtr("cm")
cm_all_2019_2022 = cmdf_2019_2022 %>% frmt_mtr("cm")
cm_all_2020_2021 = cmdf_2020_2021 %>% frmt_mtr("cm")
cm_all_2020_2022 = cmdf_2020_2022 %>% frmt_mtr("cm")
cm_all_2021_2022 = cmdf_2021_2022 %>% frmt_mtr("cm")
cm_aer_2018_2020 = cmde_2018_2020 %>% frmt_mtr("cm")
# Get male comuna matrices
cm_mle_2018_2019 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2018_2020 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2018_2021 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2018_2022 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2019_2020 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2019_2021 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2019_2022 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2020_2021 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2020_2022 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mle_2021_2022 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
cm_mer_2018_2020 = cmde_2018_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("cm")
# Get female comuna matrices
cm_fml_2018_2019 = cmdf_2018_2019 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2018_2020 = cmdf_2018_2020 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2018_2021 = cmdf_2018_2021 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2018_2022 = cmdf_2018_2022 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2019_2020 = cmdf_2019_2020 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2019_2021 = cmdf_2019_2021 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2019_2022 = cmdf_2019_2022 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2020_2021 = cmdf_2020_2021 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2020_2022 = cmdf_2020_2022 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fml_2021_2022 = cmdf_2021_2022 %>% filter(sex == "Female") %>% frmt_mtr("cm")
cm_fer_2018_2020 = cmde_2018_2020 %>% filter(sex == "Female") %>% frmt_mtr("cm")

# Get all provincia matrices
pr_all_2018_2019 = cmdf_2018_2019 %>% frmt_mtr("pr")
pr_all_2018_2020 = cmdf_2018_2020 %>% frmt_mtr("pr")
pr_all_2018_2021 = cmdf_2018_2021 %>% frmt_mtr("pr")
pr_all_2018_2022 = cmdf_2018_2022 %>% frmt_mtr("pr")
pr_all_2019_2020 = cmdf_2019_2020 %>% frmt_mtr("pr")
pr_all_2019_2021 = cmdf_2019_2021 %>% frmt_mtr("pr")
pr_all_2019_2022 = cmdf_2019_2022 %>% frmt_mtr("pr")
pr_all_2020_2021 = cmdf_2020_2021 %>% frmt_mtr("pr")
pr_all_2020_2022 = cmdf_2020_2022 %>% frmt_mtr("pr")
pr_all_2021_2022 = cmdf_2021_2022 %>% frmt_mtr("pr")
pr_aer_2018_2020 = cmde_2018_2020 %>% frmt_mtr("pr")
# Get male provincia matrices
pr_mle_2018_2019 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2018_2020 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2018_2021 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2018_2022 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2019_2020 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2019_2021 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2019_2022 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2020_2021 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2020_2022 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mle_2021_2022 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
pr_mer_2018_2020 = cmde_2018_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("pr")
# Get female provincia matrices
pr_fml_2018_2019 = cmdf_2018_2019 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2018_2020 = cmdf_2018_2020 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2018_2021 = cmdf_2018_2021 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2018_2022 = cmdf_2018_2022 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2019_2020 = cmdf_2019_2020 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2019_2021 = cmdf_2019_2021 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2019_2022 = cmdf_2019_2022 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2020_2021 = cmdf_2020_2021 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2020_2022 = cmdf_2020_2022 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fml_2021_2022 = cmdf_2021_2022 %>% filter(sex == "Female") %>% frmt_mtr("pr")
pr_fer_2018_2020 = cmde_2018_2020 %>% filter(sex == "Female") %>% frmt_mtr("pr")

# Get all region matrices
rg_all_2018_2019 = cmdf_2018_2019 %>% frmt_mtr("rg")
rg_all_2018_2020 = cmdf_2018_2020 %>% frmt_mtr("rg")
rg_all_2018_2021 = cmdf_2018_2021 %>% frmt_mtr("rg")
rg_all_2018_2022 = cmdf_2018_2022 %>% frmt_mtr("rg")
rg_all_2019_2020 = cmdf_2019_2020 %>% frmt_mtr("rg")
rg_all_2019_2021 = cmdf_2019_2021 %>% frmt_mtr("rg")
rg_all_2019_2022 = cmdf_2019_2022 %>% frmt_mtr("rg")
rg_all_2020_2021 = cmdf_2020_2021 %>% frmt_mtr("rg")
rg_all_2020_2022 = cmdf_2020_2022 %>% frmt_mtr("rg")
rg_all_2021_2022 = cmdf_2021_2022 %>% frmt_mtr("rg")
rg_aer_2018_2020 = cmde_2018_2020 %>% frmt_mtr("rg")
# Get male region matrices
rg_mle_2018_2019 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2018_2020 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2018_2021 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2018_2022 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2019_2020 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2019_2021 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2019_2022 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2020_2021 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2020_2022 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mle_2021_2022 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
rg_mer_2018_2020 = cmde_2018_2020 %>% filter(sex == "Male"  ) %>% frmt_mtr("rg")
# Get female region matrices
rg_fml_2018_2019 = cmdf_2018_2019 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2018_2020 = cmdf_2018_2020 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2018_2021 = cmdf_2018_2021 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2018_2022 = cmdf_2018_2022 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2019_2020 = cmdf_2019_2020 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2019_2021 = cmdf_2019_2021 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2019_2022 = cmdf_2019_2022 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2020_2021 = cmdf_2020_2021 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2020_2022 = cmdf_2020_2022 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fml_2021_2022 = cmdf_2021_2022 %>% filter(sex == "Female") %>% frmt_mtr("rg")
rg_fer_2018_2020 = cmde_2018_2020 %>% filter(sex == "Female") %>% frmt_mtr("rg")




# Get all comuna matrices 0-4
cm_all_2018_2019_00_04 = cmdf_2018_2019 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2018_2020_00_04 = cmdf_2018_2020 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2018_2021_00_04 = cmdf_2018_2021 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2018_2022_00_04 = cmdf_2018_2022 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2019_2020_00_04 = cmdf_2019_2020 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2019_2021_00_04 = cmdf_2019_2021 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2019_2022_00_04 = cmdf_2019_2022 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2020_2021_00_04 = cmdf_2020_2021 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2020_2022_00_04 = cmdf_2020_2022 %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_all_2021_2022_00_04 = cmdf_2021_2022 %>% filter(age == "0-4") %>% frmt_mtr("cm")
# Get male comuna matrices 0-4
cm_mle_2018_2019_00_04 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2018_2020_00_04 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2018_2021_00_04 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2018_2022_00_04 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2019_2020_00_04 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2019_2021_00_04 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2019_2022_00_04 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2020_2021_00_04 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2020_2022_00_04 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_mle_2021_2022_00_04 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("cm")
# Get female comuna matrices 0-4
cm_fml_2018_2019_00_04 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2018_2020_00_04 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2018_2021_00_04 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2018_2022_00_04 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2019_2020_00_04 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2019_2021_00_04 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2019_2022_00_04 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2020_2021_00_04 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2020_2022_00_04 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")
cm_fml_2021_2022_00_04 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("cm")

# Get all provincia matrices 0-4
pr_all_2018_2019_00_04 = cmdf_2018_2019 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2018_2020_00_04 = cmdf_2018_2020 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2018_2021_00_04 = cmdf_2018_2021 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2018_2022_00_04 = cmdf_2018_2022 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2019_2020_00_04 = cmdf_2019_2020 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2019_2021_00_04 = cmdf_2019_2021 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2019_2022_00_04 = cmdf_2019_2022 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2020_2021_00_04 = cmdf_2020_2021 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2020_2022_00_04 = cmdf_2020_2022 %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_all_2021_2022_00_04 = cmdf_2021_2022 %>% filter(age == "0-4") %>% frmt_mtr("pr")
# Get male provincia matrices 0-4
pr_mle_2018_2019_00_04 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2018_2020_00_04 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2018_2021_00_04 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2018_2022_00_04 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2019_2020_00_04 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2019_2021_00_04 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2019_2022_00_04 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2020_2021_00_04 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2020_2022_00_04 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_mle_2021_2022_00_04 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("pr")
# Get female provincia matrices 0-4
pr_fml_2018_2019_00_04 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2018_2020_00_04 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2018_2021_00_04 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2018_2022_00_04 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2019_2020_00_04 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2019_2021_00_04 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2019_2022_00_04 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2020_2021_00_04 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2020_2022_00_04 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")
pr_fml_2021_2022_00_04 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("pr")

# Get all region matrices 0-4
rg_all_2018_2019_00_04 = cmdf_2018_2019 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2018_2020_00_04 = cmdf_2018_2020 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2018_2021_00_04 = cmdf_2018_2021 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2018_2022_00_04 = cmdf_2018_2022 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2019_2020_00_04 = cmdf_2019_2020 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2019_2021_00_04 = cmdf_2019_2021 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2019_2022_00_04 = cmdf_2019_2022 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2020_2021_00_04 = cmdf_2020_2021 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2020_2022_00_04 = cmdf_2020_2022 %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_all_2021_2022_00_04 = cmdf_2021_2022 %>% filter(age == "0-4") %>% frmt_mtr("rg")
# Get male region matrices 0-4
rg_mle_2018_2019_00_04 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2018_2020_00_04 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2018_2021_00_04 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2018_2022_00_04 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2019_2020_00_04 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2019_2021_00_04 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2019_2022_00_04 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2020_2021_00_04 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2020_2022_00_04 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_mle_2021_2022_00_04 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "0-4") %>% frmt_mtr("rg")
# Get female region matrices 0-4
rg_fml_2018_2019_00_04 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2018_2020_00_04 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2018_2021_00_04 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2018_2022_00_04 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2019_2020_00_04 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2019_2021_00_04 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2019_2022_00_04 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2020_2021_00_04 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2020_2022_00_04 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")
rg_fml_2021_2022_00_04 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "0-4") %>% frmt_mtr("rg")




# Get all comuna matrices 5-14
cm_all_2018_2019_05_14 = cmdf_2018_2019 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2018_2020_05_14 = cmdf_2018_2020 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2018_2021_05_14 = cmdf_2018_2021 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2018_2022_05_14 = cmdf_2018_2022 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2019_2020_05_14 = cmdf_2019_2020 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2019_2021_05_14 = cmdf_2019_2021 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2019_2022_05_14 = cmdf_2019_2022 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2020_2021_05_14 = cmdf_2020_2021 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2020_2022_05_14 = cmdf_2020_2022 %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_all_2021_2022_05_14 = cmdf_2021_2022 %>% filter(age == "5-14") %>% frmt_mtr("cm")
# Get male comuna matrices 5-14
cm_mle_2018_2019_05_14 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2018_2020_05_14 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2018_2021_05_14 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2018_2022_05_14 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2019_2020_05_14 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2019_2021_05_14 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2019_2022_05_14 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2020_2021_05_14 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2020_2022_05_14 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_mle_2021_2022_05_14 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("cm")
# Get female comuna matrices 5-14
cm_fml_2018_2019_05_14 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2018_2020_05_14 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2018_2021_05_14 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2018_2022_05_14 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2019_2020_05_14 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2019_2021_05_14 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2019_2022_05_14 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2020_2021_05_14 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2020_2022_05_14 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")
cm_fml_2021_2022_05_14 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("cm")

# Get all provincia matrices 5-14
pr_all_2018_2019_05_14 = cmdf_2018_2019 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2018_2020_05_14 = cmdf_2018_2020 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2018_2021_05_14 = cmdf_2018_2021 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2018_2022_05_14 = cmdf_2018_2022 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2019_2020_05_14 = cmdf_2019_2020 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2019_2021_05_14 = cmdf_2019_2021 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2019_2022_05_14 = cmdf_2019_2022 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2020_2021_05_14 = cmdf_2020_2021 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2020_2022_05_14 = cmdf_2020_2022 %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_all_2021_2022_05_14 = cmdf_2021_2022 %>% filter(age == "5-14") %>% frmt_mtr("pr")
# Get male provincia matrices 5-14
pr_mle_2018_2019_05_14 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2018_2020_05_14 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2018_2021_05_14 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2018_2022_05_14 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2019_2020_05_14 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2019_2021_05_14 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2019_2022_05_14 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2020_2021_05_14 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2020_2022_05_14 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_mle_2021_2022_05_14 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("pr")
# Get female provincia matrices 5-14
pr_fml_2018_2019_05_14 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2018_2020_05_14 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2018_2021_05_14 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2018_2022_05_14 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2019_2020_05_14 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2019_2021_05_14 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2019_2022_05_14 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2020_2021_05_14 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2020_2022_05_14 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")
pr_fml_2021_2022_05_14 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("pr")

# Get all region matrices 5-14
rg_all_2018_2019_05_14 = cmdf_2018_2019 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2018_2020_05_14 = cmdf_2018_2020 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2018_2021_05_14 = cmdf_2018_2021 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2018_2022_05_14 = cmdf_2018_2022 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2019_2020_05_14 = cmdf_2019_2020 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2019_2021_05_14 = cmdf_2019_2021 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2019_2022_05_14 = cmdf_2019_2022 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2020_2021_05_14 = cmdf_2020_2021 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2020_2022_05_14 = cmdf_2020_2022 %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_all_2021_2022_05_14 = cmdf_2021_2022 %>% filter(age == "5-14") %>% frmt_mtr("rg")
# Get male region matrices 5-14
rg_mle_2018_2019_05_14 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2018_2020_05_14 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2018_2021_05_14 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2018_2022_05_14 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2019_2020_05_14 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2019_2021_05_14 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2019_2022_05_14 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2020_2021_05_14 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2020_2022_05_14 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_mle_2021_2022_05_14 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "5-14") %>% frmt_mtr("rg")
# Get female region matrices 5-14
rg_fml_2018_2019_05_14 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2018_2020_05_14 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2018_2021_05_14 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2018_2022_05_14 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2019_2020_05_14 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2019_2021_05_14 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2019_2022_05_14 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2020_2021_05_14 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2020_2022_05_14 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")
rg_fml_2021_2022_05_14 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "5-14") %>% frmt_mtr("rg")




# Get all comuna matrices 15-29
cm_all_2018_2019_15_29 = cmdf_2018_2019 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2018_2020_15_29 = cmdf_2018_2020 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2018_2021_15_29 = cmdf_2018_2021 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2018_2022_15_29 = cmdf_2018_2022 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2019_2020_15_29 = cmdf_2019_2020 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2019_2021_15_29 = cmdf_2019_2021 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2019_2022_15_29 = cmdf_2019_2022 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2020_2021_15_29 = cmdf_2020_2021 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2020_2022_15_29 = cmdf_2020_2022 %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_all_2021_2022_15_29 = cmdf_2021_2022 %>% filter(age == "15-29") %>% frmt_mtr("cm")
# Get male comuna matrices 15-29
cm_mle_2018_2019_15_29 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2018_2020_15_29 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2018_2021_15_29 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2018_2022_15_29 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2019_2020_15_29 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2019_2021_15_29 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2019_2022_15_29 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2020_2021_15_29 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2020_2022_15_29 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_mle_2021_2022_15_29 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("cm")
# Get female comuna matrices 15-29
cm_fml_2018_2019_15_29 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2018_2020_15_29 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2018_2021_15_29 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2018_2022_15_29 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2019_2020_15_29 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2019_2021_15_29 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2019_2022_15_29 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2020_2021_15_29 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2020_2022_15_29 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")
cm_fml_2021_2022_15_29 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("cm")

# Get all provincia matrices 15-29
pr_all_2018_2019_15_29 = cmdf_2018_2019 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2018_2020_15_29 = cmdf_2018_2020 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2018_2021_15_29 = cmdf_2018_2021 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2018_2022_15_29 = cmdf_2018_2022 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2019_2020_15_29 = cmdf_2019_2020 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2019_2021_15_29 = cmdf_2019_2021 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2019_2022_15_29 = cmdf_2019_2022 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2020_2021_15_29 = cmdf_2020_2021 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2020_2022_15_29 = cmdf_2020_2022 %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_all_2021_2022_15_29 = cmdf_2021_2022 %>% filter(age == "15-29") %>% frmt_mtr("pr")
# Get male provincia matrices 15-29
pr_mle_2018_2019_15_29 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2018_2020_15_29 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2018_2021_15_29 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2018_2022_15_29 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2019_2020_15_29 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2019_2021_15_29 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2019_2022_15_29 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2020_2021_15_29 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2020_2022_15_29 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_mle_2021_2022_15_29 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("pr")
# Get female provincia matrices 15-29
pr_fml_2018_2019_15_29 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2018_2020_15_29 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2018_2021_15_29 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2018_2022_15_29 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2019_2020_15_29 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2019_2021_15_29 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2019_2022_15_29 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2020_2021_15_29 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2020_2022_15_29 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")
pr_fml_2021_2022_15_29 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("pr")

# Get all region matrices 15-29
rg_all_2018_2019_15_29 = cmdf_2018_2019 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2018_2020_15_29 = cmdf_2018_2020 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2018_2021_15_29 = cmdf_2018_2021 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2018_2022_15_29 = cmdf_2018_2022 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2019_2020_15_29 = cmdf_2019_2020 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2019_2021_15_29 = cmdf_2019_2021 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2019_2022_15_29 = cmdf_2019_2022 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2020_2021_15_29 = cmdf_2020_2021 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2020_2022_15_29 = cmdf_2020_2022 %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_all_2021_2022_15_29 = cmdf_2021_2022 %>% filter(age == "15-29") %>% frmt_mtr("rg")
# Get male region matrices 15-29
rg_mle_2018_2019_15_29 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2018_2020_15_29 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2018_2021_15_29 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2018_2022_15_29 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2019_2020_15_29 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2019_2021_15_29 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2019_2022_15_29 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2020_2021_15_29 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2020_2022_15_29 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_mle_2021_2022_15_29 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "15-29") %>% frmt_mtr("rg")
# Get female region matrices 15-29
rg_fml_2018_2019_15_29 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2018_2020_15_29 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2018_2021_15_29 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2018_2022_15_29 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2019_2020_15_29 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2019_2021_15_29 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2019_2022_15_29 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2020_2021_15_29 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2020_2022_15_29 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")
rg_fml_2021_2022_15_29 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "15-29") %>% frmt_mtr("rg")




# Get all comuna matrices 30-59
cm_all_2018_2019_30_59 = cmdf_2018_2019 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2018_2020_30_59 = cmdf_2018_2020 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2018_2021_30_59 = cmdf_2018_2021 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2018_2022_30_59 = cmdf_2018_2022 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2019_2020_30_59 = cmdf_2019_2020 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2019_2021_30_59 = cmdf_2019_2021 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2019_2022_30_59 = cmdf_2019_2022 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2020_2021_30_59 = cmdf_2020_2021 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2020_2022_30_59 = cmdf_2020_2022 %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_all_2021_2022_30_59 = cmdf_2021_2022 %>% filter(age == "30-59") %>% frmt_mtr("cm")
# Get male comuna matrices 30-59
cm_mle_2018_2019_30_59 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2018_2020_30_59 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2018_2021_30_59 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2018_2022_30_59 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2019_2020_30_59 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2019_2021_30_59 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2019_2022_30_59 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2020_2021_30_59 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2020_2022_30_59 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_mle_2021_2022_30_59 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("cm")
# Get female comuna matrices 30-59
cm_fml_2018_2019_30_59 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2018_2020_30_59 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2018_2021_30_59 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2018_2022_30_59 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2019_2020_30_59 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2019_2021_30_59 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2019_2022_30_59 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2020_2021_30_59 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2020_2022_30_59 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")
cm_fml_2021_2022_30_59 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("cm")

# Get all provincia matrices 30-59
pr_all_2018_2019_30_59 = cmdf_2018_2019 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2018_2020_30_59 = cmdf_2018_2020 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2018_2021_30_59 = cmdf_2018_2021 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2018_2022_30_59 = cmdf_2018_2022 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2019_2020_30_59 = cmdf_2019_2020 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2019_2021_30_59 = cmdf_2019_2021 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2019_2022_30_59 = cmdf_2019_2022 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2020_2021_30_59 = cmdf_2020_2021 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2020_2022_30_59 = cmdf_2020_2022 %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_all_2021_2022_30_59 = cmdf_2021_2022 %>% filter(age == "30-59") %>% frmt_mtr("pr")
# Get male provincia matrices 30-59
pr_mle_2018_2019_30_59 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2018_2020_30_59 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2018_2021_30_59 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2018_2022_30_59 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2019_2020_30_59 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2019_2021_30_59 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2019_2022_30_59 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2020_2021_30_59 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2020_2022_30_59 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_mle_2021_2022_30_59 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("pr")
# Get female provincia matrices 30-59
pr_fml_2018_2019_30_59 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2018_2020_30_59 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2018_2021_30_59 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2018_2022_30_59 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2019_2020_30_59 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2019_2021_30_59 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2019_2022_30_59 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2020_2021_30_59 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2020_2022_30_59 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")
pr_fml_2021_2022_30_59 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("pr")

# Get all region matrices 30-59
rg_all_2018_2019_30_59 = cmdf_2018_2019 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2018_2020_30_59 = cmdf_2018_2020 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2018_2021_30_59 = cmdf_2018_2021 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2018_2022_30_59 = cmdf_2018_2022 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2019_2020_30_59 = cmdf_2019_2020 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2019_2021_30_59 = cmdf_2019_2021 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2019_2022_30_59 = cmdf_2019_2022 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2020_2021_30_59 = cmdf_2020_2021 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2020_2022_30_59 = cmdf_2020_2022 %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_all_2021_2022_30_59 = cmdf_2021_2022 %>% filter(age == "30-59") %>% frmt_mtr("rg")
# Get male region matrices 30-59
rg_mle_2018_2019_30_59 = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2018_2020_30_59 = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2018_2021_30_59 = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2018_2022_30_59 = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2019_2020_30_59 = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2019_2021_30_59 = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2019_2022_30_59 = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2020_2021_30_59 = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2020_2022_30_59 = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_mle_2021_2022_30_59 = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "30-59") %>% frmt_mtr("rg")
# Get female region matrices 30-59
rg_fml_2018_2019_30_59 = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2018_2020_30_59 = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2018_2021_30_59 = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2018_2022_30_59 = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2019_2020_30_59 = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2019_2021_30_59 = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2019_2022_30_59 = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2020_2021_30_59 = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2020_2022_30_59 = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")
rg_fml_2021_2022_30_59 = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "30-59") %>% frmt_mtr("rg")




# Get all comuna matrices 60-más
cm_all_2018_2019_60pls = cmdf_2018_2019 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2018_2020_60pls = cmdf_2018_2020 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2018_2021_60pls = cmdf_2018_2021 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2018_2022_60pls = cmdf_2018_2022 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2019_2020_60pls = cmdf_2019_2020 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2019_2021_60pls = cmdf_2019_2021 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2019_2022_60pls = cmdf_2019_2022 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2020_2021_60pls = cmdf_2020_2021 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2020_2022_60pls = cmdf_2020_2022 %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_all_2021_2022_60pls = cmdf_2021_2022 %>% filter(age == "60-más") %>% frmt_mtr("cm")
# Get male comuna matrices 60-más
cm_mle_2018_2019_60pls = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2018_2020_60pls = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2018_2021_60pls = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2018_2022_60pls = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2019_2020_60pls = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2019_2021_60pls = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2019_2022_60pls = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2020_2021_60pls = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2020_2022_60pls = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_mle_2021_2022_60pls = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("cm")
# Get female comuna matrices 60-más
cm_fml_2018_2019_60pls = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2018_2020_60pls = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2018_2021_60pls = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2018_2022_60pls = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2019_2020_60pls = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2019_2021_60pls = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2019_2022_60pls = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2020_2021_60pls = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2020_2022_60pls = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")
cm_fml_2021_2022_60pls = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("cm")

# Get all provincia matrices 60-más
pr_all_2018_2019_60pls = cmdf_2018_2019 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2018_2020_60pls = cmdf_2018_2020 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2018_2021_60pls = cmdf_2018_2021 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2018_2022_60pls = cmdf_2018_2022 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2019_2020_60pls = cmdf_2019_2020 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2019_2021_60pls = cmdf_2019_2021 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2019_2022_60pls = cmdf_2019_2022 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2020_2021_60pls = cmdf_2020_2021 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2020_2022_60pls = cmdf_2020_2022 %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_all_2021_2022_60pls = cmdf_2021_2022 %>% filter(age == "60-más") %>% frmt_mtr("pr")
# Get male provincia matrices 60-más
pr_mle_2018_2019_60pls = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2018_2020_60pls = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2018_2021_60pls = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2018_2022_60pls = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2019_2020_60pls = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2019_2021_60pls = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2019_2022_60pls = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2020_2021_60pls = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2020_2022_60pls = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_mle_2021_2022_60pls = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("pr")
# Get female provincia matrices 60-más
pr_fml_2018_2019_60pls = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2018_2020_60pls = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2018_2021_60pls = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2018_2022_60pls = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2019_2020_60pls = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2019_2021_60pls = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2019_2022_60pls = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2020_2021_60pls = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2020_2022_60pls = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")
pr_fml_2021_2022_60pls = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("pr")

# Get all region matrices 60-más
rg_all_2018_2019_60pls = cmdf_2018_2019 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2018_2020_60pls = cmdf_2018_2020 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2018_2021_60pls = cmdf_2018_2021 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2018_2022_60pls = cmdf_2018_2022 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2019_2020_60pls = cmdf_2019_2020 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2019_2021_60pls = cmdf_2019_2021 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2019_2022_60pls = cmdf_2019_2022 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2020_2021_60pls = cmdf_2020_2021 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2020_2022_60pls = cmdf_2020_2022 %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_all_2021_2022_60pls = cmdf_2021_2022 %>% filter(age == "60-más") %>% frmt_mtr("rg")
# Get male region matrices 60-más
rg_mle_2018_2019_60pls = cmdf_2018_2019 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2018_2020_60pls = cmdf_2018_2020 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2018_2021_60pls = cmdf_2018_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2018_2022_60pls = cmdf_2018_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2019_2020_60pls = cmdf_2019_2020 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2019_2021_60pls = cmdf_2019_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2019_2022_60pls = cmdf_2019_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2020_2021_60pls = cmdf_2020_2021 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2020_2022_60pls = cmdf_2020_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_mle_2021_2022_60pls = cmdf_2021_2022 %>% filter(sex == "Male"  ) %>% filter(age == "60-más") %>% frmt_mtr("rg")
# Get female region matrices 60-más
rg_fml_2018_2019_60pls = cmdf_2018_2019 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2018_2020_60pls = cmdf_2018_2020 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2018_2021_60pls = cmdf_2018_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2018_2022_60pls = cmdf_2018_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2019_2020_60pls = cmdf_2019_2020 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2019_2021_60pls = cmdf_2019_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2019_2022_60pls = cmdf_2019_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2020_2021_60pls = cmdf_2020_2021 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2020_2022_60pls = cmdf_2020_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")
rg_fml_2021_2022_60pls = cmdf_2021_2022 %>% filter(sex == "Female") %>% filter(age == "60-más") %>% frmt_mtr("rg")



# Save migration matrices

# Save all comuna matrices
write.csv(cm_all_2018_2019,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2019.csv"))
write.csv(cm_all_2018_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2020.csv"))
write.csv(cm_all_2018_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2021.csv"))
write.csv(cm_all_2018_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2022.csv"))
write.csv(cm_all_2019_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2020.csv"))
write.csv(cm_all_2019_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2021.csv"))
write.csv(cm_all_2019_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2022.csv"))
write.csv(cm_all_2020_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2021.csv"))
write.csv(cm_all_2020_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2022.csv"))
write.csv(cm_all_2021_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2021_2022.csv"))
write.csv(cm_aer_2018_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2020_over_15.csv"))
# Save male comuna matrices
write.csv(cm_mle_2018_2019,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2019.csv"))
write.csv(cm_mle_2018_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2020.csv"))
write.csv(cm_mle_2018_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2021.csv"))
write.csv(cm_mle_2018_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2022.csv"))
write.csv(cm_mle_2019_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2020.csv"))
write.csv(cm_mle_2019_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2021.csv"))
write.csv(cm_mle_2019_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2022.csv"))
write.csv(cm_mle_2020_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2021.csv"))
write.csv(cm_mle_2020_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2022.csv"))
write.csv(cm_mle_2021_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2021_2022.csv"))
write.csv(cm_mer_2018_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2020_over_15.csv"))
# Save female comuna matrices
write.csv(cm_fml_2018_2019,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2019.csv"))
write.csv(cm_fml_2018_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2020.csv"))
write.csv(cm_fml_2018_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2021.csv"))
write.csv(cm_fml_2018_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2022.csv"))
write.csv(cm_fml_2019_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2020.csv"))
write.csv(cm_fml_2019_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2021.csv"))
write.csv(cm_fml_2019_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2022.csv"))
write.csv(cm_fml_2020_2021,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2021.csv"))
write.csv(cm_fml_2020_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2022.csv"))
write.csv(cm_fml_2021_2022,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2021_2022.csv"))
write.csv(cm_fer_2018_2020,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2020_over_15.csv"))

# Save all provincia matrices
write.csv(pr_all_2018_2019,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2019.csv"))
write.csv(pr_all_2018_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2020.csv"))
write.csv(pr_all_2018_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2021.csv"))
write.csv(pr_all_2018_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2022.csv"))
write.csv(pr_all_2019_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2020.csv"))
write.csv(pr_all_2019_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2021.csv"))
write.csv(pr_all_2019_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2022.csv"))
write.csv(pr_all_2020_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2021.csv"))
write.csv(pr_all_2020_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2022.csv"))
write.csv(pr_all_2021_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2021_2022.csv"))
write.csv(pr_aer_2018_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2020_over_15.csv"))
# Save male provincia matrices
write.csv(pr_mle_2018_2019,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2019.csv"))
write.csv(pr_mle_2018_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2020.csv"))
write.csv(pr_mle_2018_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2021.csv"))
write.csv(pr_mle_2018_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2022.csv"))
write.csv(pr_mle_2019_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2020.csv"))
write.csv(pr_mle_2019_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2021.csv"))
write.csv(pr_mle_2019_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2022.csv"))
write.csv(pr_mle_2020_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2021.csv"))
write.csv(pr_mle_2020_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2022.csv"))
write.csv(pr_mle_2021_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2021_2022.csv"))
write.csv(pr_mer_2018_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2020_over_15.csv"))
# Save female provincia matrices
write.csv(pr_fml_2018_2019,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2019.csv"))
write.csv(pr_fml_2018_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2020.csv"))
write.csv(pr_fml_2018_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2021.csv"))
write.csv(pr_fml_2018_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2022.csv"))
write.csv(pr_fml_2019_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2020.csv"))
write.csv(pr_fml_2019_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2021.csv"))
write.csv(pr_fml_2019_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2022.csv"))
write.csv(pr_fml_2020_2021,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2021.csv"))
write.csv(pr_fml_2020_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2022.csv"))
write.csv(pr_fml_2021_2022,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2021_2022.csv"))
write.csv(pr_fer_2018_2020,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2020_over_15.csv"))

# Save all region matrices
write.csv(rg_all_2018_2019,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2019.csv"))
write.csv(rg_all_2018_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020.csv"))
write.csv(rg_all_2018_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2021.csv"))
write.csv(rg_all_2018_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2022.csv"))
write.csv(rg_all_2019_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2020.csv"))
write.csv(rg_all_2019_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2021.csv"))
write.csv(rg_all_2019_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2022.csv"))
write.csv(rg_all_2020_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2021.csv"))
write.csv(rg_all_2020_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2022.csv"))
write.csv(rg_all_2021_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2021_2022.csv"))
write.csv(rg_aer_2018_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020_over_15.csv"))
# Save male region matrices
write.csv(rg_mle_2018_2019,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2019.csv"))
write.csv(rg_mle_2018_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2020.csv"))
write.csv(rg_mle_2018_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2021.csv"))
write.csv(rg_mle_2018_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2022.csv"))
write.csv(rg_mle_2019_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2020.csv"))
write.csv(rg_mle_2019_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2021.csv"))
write.csv(rg_mle_2019_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2022.csv"))
write.csv(rg_mle_2020_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2021.csv"))
write.csv(rg_mle_2020_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2022.csv"))
write.csv(rg_mle_2021_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2021_2022.csv"))
write.csv(rg_mer_2018_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2020_over_15.csv"))
# Save female region matrices
write.csv(rg_fml_2018_2019,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2019.csv"))
write.csv(rg_fml_2018_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2020.csv"))
write.csv(rg_fml_2018_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2021.csv"))
write.csv(rg_fml_2018_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2022.csv"))
write.csv(rg_fml_2019_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2020.csv"))
write.csv(rg_fml_2019_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2021.csv"))
write.csv(rg_fml_2019_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2022.csv"))
write.csv(rg_fml_2020_2021,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2021.csv"))
write.csv(rg_fml_2020_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2022.csv"))
write.csv(rg_fml_2021_2022,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2021_2022.csv"))
write.csv(rg_fer_2018_2020,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2020_over_15.csv"))



# Save all comuna matrices 0-4
write.csv(cm_all_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2019_00_04.csv"))
write.csv(cm_all_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2020_00_04.csv"))
write.csv(cm_all_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2021_00_04.csv"))
write.csv(cm_all_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2022_00_04.csv"))
write.csv(cm_all_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2020_00_04.csv"))
write.csv(cm_all_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2021_00_04.csv"))
write.csv(cm_all_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2022_00_04.csv"))
write.csv(cm_all_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2021_00_04.csv"))
write.csv(cm_all_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2022_00_04.csv"))
write.csv(cm_all_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2021_2022_00_04.csv"))
# Save male comuna matrices 0-4
write.csv(cm_mle_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2019_00_04.csv"))
write.csv(cm_mle_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2020_00_04.csv"))
write.csv(cm_mle_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2021_00_04.csv"))
write.csv(cm_mle_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2022_00_04.csv"))
write.csv(cm_mle_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2020_00_04.csv"))
write.csv(cm_mle_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2021_00_04.csv"))
write.csv(cm_mle_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2022_00_04.csv"))
write.csv(cm_mle_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2021_00_04.csv"))
write.csv(cm_mle_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2022_00_04.csv"))
write.csv(cm_mle_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2021_2022_00_04.csv"))
# Save female comuna matrices 0-4
write.csv(cm_fml_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2019_00_04.csv"))
write.csv(cm_fml_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2020_00_04.csv"))
write.csv(cm_fml_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2021_00_04.csv"))
write.csv(cm_fml_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2022_00_04.csv"))
write.csv(cm_fml_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2020_00_04.csv"))
write.csv(cm_fml_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2021_00_04.csv"))
write.csv(cm_fml_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2022_00_04.csv"))
write.csv(cm_fml_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2021_00_04.csv"))
write.csv(cm_fml_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2022_00_04.csv"))
write.csv(cm_fml_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2021_2022_00_04.csv"))

# Save all provincia matrices 0-4
write.csv(pr_all_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2019_00_04.csv"))
write.csv(pr_all_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2020_00_04.csv"))
write.csv(pr_all_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2021_00_04.csv"))
write.csv(pr_all_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2022_00_04.csv"))
write.csv(pr_all_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2020_00_04.csv"))
write.csv(pr_all_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2021_00_04.csv"))
write.csv(pr_all_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2022_00_04.csv"))
write.csv(pr_all_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2021_00_04.csv"))
write.csv(pr_all_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2022_00_04.csv"))
write.csv(pr_all_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2021_2022_00_04.csv"))
# Save male provincia matrices 0-4
write.csv(pr_mle_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2019_00_04.csv"))
write.csv(pr_mle_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2020_00_04.csv"))
write.csv(pr_mle_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2021_00_04.csv"))
write.csv(pr_mle_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2022_00_04.csv"))
write.csv(pr_mle_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2020_00_04.csv"))
write.csv(pr_mle_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2021_00_04.csv"))
write.csv(pr_mle_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2022_00_04.csv"))
write.csv(pr_mle_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2021_00_04.csv"))
write.csv(pr_mle_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2022_00_04.csv"))
write.csv(pr_mle_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2021_2022_00_04.csv"))
# Save female provincia matrices 0-4
write.csv(pr_fml_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2019_00_04.csv"))
write.csv(pr_fml_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2020_00_04.csv"))
write.csv(pr_fml_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2021_00_04.csv"))
write.csv(pr_fml_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2022_00_04.csv"))
write.csv(pr_fml_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2020_00_04.csv"))
write.csv(pr_fml_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2021_00_04.csv"))
write.csv(pr_fml_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2022_00_04.csv"))
write.csv(pr_fml_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2021_00_04.csv"))
write.csv(pr_fml_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2022_00_04.csv"))
write.csv(pr_fml_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2021_2022_00_04.csv"))

# Save all region matrices 0-4
write.csv(rg_all_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2019_00_04.csv"))
write.csv(rg_all_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020_00_04.csv"))
write.csv(rg_all_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2021_00_04.csv"))
write.csv(rg_all_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2022_00_04.csv"))
write.csv(rg_all_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2020_00_04.csv"))
write.csv(rg_all_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2021_00_04.csv"))
write.csv(rg_all_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2022_00_04.csv"))
write.csv(rg_all_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2021_00_04.csv"))
write.csv(rg_all_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2022_00_04.csv"))
write.csv(rg_all_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2021_2022_00_04.csv"))
# Save male region matrices 0-4
write.csv(rg_mle_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2019_00_04.csv"))
write.csv(rg_mle_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2020_00_04.csv"))
write.csv(rg_mle_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2021_00_04.csv"))
write.csv(rg_mle_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2022_00_04.csv"))
write.csv(rg_mle_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2020_00_04.csv"))
write.csv(rg_mle_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2021_00_04.csv"))
write.csv(rg_mle_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2022_00_04.csv"))
write.csv(rg_mle_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2021_00_04.csv"))
write.csv(rg_mle_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2022_00_04.csv"))
write.csv(rg_mle_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2021_2022_00_04.csv"))
# Save female region matrices 0-4
write.csv(rg_fml_2018_2019_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2019_00_04.csv"))
write.csv(rg_fml_2018_2020_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2020_00_04.csv"))
write.csv(rg_fml_2018_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2021_00_04.csv"))
write.csv(rg_fml_2018_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2022_00_04.csv"))
write.csv(rg_fml_2019_2020_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2020_00_04.csv"))
write.csv(rg_fml_2019_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2021_00_04.csv"))
write.csv(rg_fml_2019_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2022_00_04.csv"))
write.csv(rg_fml_2020_2021_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2021_00_04.csv"))
write.csv(rg_fml_2020_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2022_00_04.csv"))
write.csv(rg_fml_2021_2022_00_04,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2021_2022_00_04.csv"))



# Save all comuna matrices 5-14
write.csv(cm_all_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2019_05_14.csv"))
write.csv(cm_all_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2020_05_14.csv"))
write.csv(cm_all_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2021_05_14.csv"))
write.csv(cm_all_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2022_05_14.csv"))
write.csv(cm_all_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2020_05_14.csv"))
write.csv(cm_all_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2021_05_14.csv"))
write.csv(cm_all_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2022_05_14.csv"))
write.csv(cm_all_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2021_05_14.csv"))
write.csv(cm_all_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2022_05_14.csv"))
write.csv(cm_all_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2021_2022_05_14.csv"))
# Save male comuna matrices 5-14
write.csv(cm_mle_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2019_05_14.csv"))
write.csv(cm_mle_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2020_05_14.csv"))
write.csv(cm_mle_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2021_05_14.csv"))
write.csv(cm_mle_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2022_05_14.csv"))
write.csv(cm_mle_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2020_05_14.csv"))
write.csv(cm_mle_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2021_05_14.csv"))
write.csv(cm_mle_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2022_05_14.csv"))
write.csv(cm_mle_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2021_05_14.csv"))
write.csv(cm_mle_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2022_05_14.csv"))
write.csv(cm_mle_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2021_2022_05_14.csv"))
# Save female comuna matrices 5-14
write.csv(cm_fml_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2019_05_14.csv"))
write.csv(cm_fml_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2020_05_14.csv"))
write.csv(cm_fml_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2021_05_14.csv"))
write.csv(cm_fml_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2022_05_14.csv"))
write.csv(cm_fml_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2020_05_14.csv"))
write.csv(cm_fml_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2021_05_14.csv"))
write.csv(cm_fml_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2022_05_14.csv"))
write.csv(cm_fml_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2021_05_14.csv"))
write.csv(cm_fml_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2022_05_14.csv"))
write.csv(cm_fml_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2021_2022_05_14.csv"))

# Save all provincia matrices 5-14
write.csv(pr_all_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2019_05_14.csv"))
write.csv(pr_all_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2020_05_14.csv"))
write.csv(pr_all_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2021_05_14.csv"))
write.csv(pr_all_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2022_05_14.csv"))
write.csv(pr_all_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2020_05_14.csv"))
write.csv(pr_all_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2021_05_14.csv"))
write.csv(pr_all_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2022_05_14.csv"))
write.csv(pr_all_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2021_05_14.csv"))
write.csv(pr_all_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2022_05_14.csv"))
write.csv(pr_all_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2021_2022_05_14.csv"))
# Save male provincia matrices 5-14
write.csv(pr_mle_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2019_05_14.csv"))
write.csv(pr_mle_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2020_05_14.csv"))
write.csv(pr_mle_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2021_05_14.csv"))
write.csv(pr_mle_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2022_05_14.csv"))
write.csv(pr_mle_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2020_05_14.csv"))
write.csv(pr_mle_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2021_05_14.csv"))
write.csv(pr_mle_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2022_05_14.csv"))
write.csv(pr_mle_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2021_05_14.csv"))
write.csv(pr_mle_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2022_05_14.csv"))
write.csv(pr_mle_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2021_2022_05_14.csv"))
# Save female provincia matrices 5-14
write.csv(pr_fml_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2019_05_14.csv"))
write.csv(pr_fml_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2020_05_14.csv"))
write.csv(pr_fml_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2021_05_14.csv"))
write.csv(pr_fml_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2022_05_14.csv"))
write.csv(pr_fml_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2020_05_14.csv"))
write.csv(pr_fml_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2021_05_14.csv"))
write.csv(pr_fml_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2022_05_14.csv"))
write.csv(pr_fml_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2021_05_14.csv"))
write.csv(pr_fml_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2022_05_14.csv"))
write.csv(pr_fml_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2021_2022_05_14.csv"))

# Save all region matrices 5-14
write.csv(rg_all_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2019_05_14.csv"))
write.csv(rg_all_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020_05_14.csv"))
write.csv(rg_all_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2021_05_14.csv"))
write.csv(rg_all_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2022_05_14.csv"))
write.csv(rg_all_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2020_05_14.csv"))
write.csv(rg_all_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2021_05_14.csv"))
write.csv(rg_all_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2022_05_14.csv"))
write.csv(rg_all_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2021_05_14.csv"))
write.csv(rg_all_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2022_05_14.csv"))
write.csv(rg_all_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2021_2022_05_14.csv"))
# Save male region matrices 5-14
write.csv(rg_mle_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2019_05_14.csv"))
write.csv(rg_mle_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2020_05_14.csv"))
write.csv(rg_mle_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2021_05_14.csv"))
write.csv(rg_mle_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2022_05_14.csv"))
write.csv(rg_mle_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2020_05_14.csv"))
write.csv(rg_mle_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2021_05_14.csv"))
write.csv(rg_mle_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2022_05_14.csv"))
write.csv(rg_mle_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2021_05_14.csv"))
write.csv(rg_mle_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2022_05_14.csv"))
write.csv(rg_mle_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2021_2022_05_14.csv"))
# Save female region matrices 5-14
write.csv(rg_fml_2018_2019_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2019_05_14.csv"))
write.csv(rg_fml_2018_2020_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2020_05_14.csv"))
write.csv(rg_fml_2018_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2021_05_14.csv"))
write.csv(rg_fml_2018_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2022_05_14.csv"))
write.csv(rg_fml_2019_2020_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2020_05_14.csv"))
write.csv(rg_fml_2019_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2021_05_14.csv"))
write.csv(rg_fml_2019_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2022_05_14.csv"))
write.csv(rg_fml_2020_2021_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2021_05_14.csv"))
write.csv(rg_fml_2020_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2022_05_14.csv"))
write.csv(rg_fml_2021_2022_05_14,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2021_2022_05_14.csv"))



# Save all comuna matrices 15-29
write.csv(cm_all_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2019_15_29.csv"))
write.csv(cm_all_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2020_15_29.csv"))
write.csv(cm_all_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2021_15_29.csv"))
write.csv(cm_all_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2022_15_29.csv"))
write.csv(cm_all_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2020_15_29.csv"))
write.csv(cm_all_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2021_15_29.csv"))
write.csv(cm_all_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2022_15_29.csv"))
write.csv(cm_all_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2021_15_29.csv"))
write.csv(cm_all_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2022_15_29.csv"))
write.csv(cm_all_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2021_2022_15_29.csv"))
# Save male comuna matrices 15-29
write.csv(cm_mle_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2019_15_29.csv"))
write.csv(cm_mle_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2020_15_29.csv"))
write.csv(cm_mle_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2021_15_29.csv"))
write.csv(cm_mle_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2022_15_29.csv"))
write.csv(cm_mle_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2020_15_29.csv"))
write.csv(cm_mle_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2021_15_29.csv"))
write.csv(cm_mle_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2022_15_29.csv"))
write.csv(cm_mle_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2021_15_29.csv"))
write.csv(cm_mle_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2022_15_29.csv"))
write.csv(cm_mle_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2021_2022_15_29.csv"))
# Save female comuna matrices 15-29
write.csv(cm_fml_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2019_15_29.csv"))
write.csv(cm_fml_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2020_15_29.csv"))
write.csv(cm_fml_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2021_15_29.csv"))
write.csv(cm_fml_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2022_15_29.csv"))
write.csv(cm_fml_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2020_15_29.csv"))
write.csv(cm_fml_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2021_15_29.csv"))
write.csv(cm_fml_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2022_15_29.csv"))
write.csv(cm_fml_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2021_15_29.csv"))
write.csv(cm_fml_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2022_15_29.csv"))
write.csv(cm_fml_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2021_2022_15_29.csv"))

# Save all provincia matrices 15-29
write.csv(pr_all_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2019_15_29.csv"))
write.csv(pr_all_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2020_15_29.csv"))
write.csv(pr_all_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2021_15_29.csv"))
write.csv(pr_all_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2022_15_29.csv"))
write.csv(pr_all_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2020_15_29.csv"))
write.csv(pr_all_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2021_15_29.csv"))
write.csv(pr_all_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2022_15_29.csv"))
write.csv(pr_all_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2021_15_29.csv"))
write.csv(pr_all_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2022_15_29.csv"))
write.csv(pr_all_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2021_2022_15_29.csv"))
# Save male provincia matrices 15-29
write.csv(pr_mle_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2019_15_29.csv"))
write.csv(pr_mle_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2020_15_29.csv"))
write.csv(pr_mle_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2021_15_29.csv"))
write.csv(pr_mle_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2022_15_29.csv"))
write.csv(pr_mle_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2020_15_29.csv"))
write.csv(pr_mle_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2021_15_29.csv"))
write.csv(pr_mle_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2022_15_29.csv"))
write.csv(pr_mle_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2021_15_29.csv"))
write.csv(pr_mle_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2022_15_29.csv"))
write.csv(pr_mle_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2021_2022_15_29.csv"))
# Save female provincia matrices 15-29
write.csv(pr_fml_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2019_15_29.csv"))
write.csv(pr_fml_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2020_15_29.csv"))
write.csv(pr_fml_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2021_15_29.csv"))
write.csv(pr_fml_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2022_15_29.csv"))
write.csv(pr_fml_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2020_15_29.csv"))
write.csv(pr_fml_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2021_15_29.csv"))
write.csv(pr_fml_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2022_15_29.csv"))
write.csv(pr_fml_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2021_15_29.csv"))
write.csv(pr_fml_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2022_15_29.csv"))
write.csv(pr_fml_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2021_2022_15_29.csv"))

# Save all region matrices 15-29
write.csv(rg_all_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2019_15_29.csv"))
write.csv(rg_all_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020_15_29.csv"))
write.csv(rg_all_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2021_15_29.csv"))
write.csv(rg_all_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2022_15_29.csv"))
write.csv(rg_all_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2020_15_29.csv"))
write.csv(rg_all_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2021_15_29.csv"))
write.csv(rg_all_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2022_15_29.csv"))
write.csv(rg_all_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2021_15_29.csv"))
write.csv(rg_all_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2022_15_29.csv"))
write.csv(rg_all_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2021_2022_15_29.csv"))
# Save male region matrices 15-29
write.csv(rg_mle_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2019_15_29.csv"))
write.csv(rg_mle_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2020_15_29.csv"))
write.csv(rg_mle_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2021_15_29.csv"))
write.csv(rg_mle_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2022_15_29.csv"))
write.csv(rg_mle_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2020_15_29.csv"))
write.csv(rg_mle_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2021_15_29.csv"))
write.csv(rg_mle_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2022_15_29.csv"))
write.csv(rg_mle_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2021_15_29.csv"))
write.csv(rg_mle_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2022_15_29.csv"))
write.csv(rg_mle_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2021_2022_15_29.csv"))
# Save female region matrices 15-29
write.csv(rg_fml_2018_2019_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2019_15_29.csv"))
write.csv(rg_fml_2018_2020_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2020_15_29.csv"))
write.csv(rg_fml_2018_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2021_15_29.csv"))
write.csv(rg_fml_2018_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2022_15_29.csv"))
write.csv(rg_fml_2019_2020_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2020_15_29.csv"))
write.csv(rg_fml_2019_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2021_15_29.csv"))
write.csv(rg_fml_2019_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2022_15_29.csv"))
write.csv(rg_fml_2020_2021_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2021_15_29.csv"))
write.csv(rg_fml_2020_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2022_15_29.csv"))
write.csv(rg_fml_2021_2022_15_29,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2021_2022_15_29.csv"))



# Save all comuna matrices 30-59
write.csv(cm_all_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2019_30_59.csv"))
write.csv(cm_all_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2020_30_59.csv"))
write.csv(cm_all_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2021_30_59.csv"))
write.csv(cm_all_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2022_30_59.csv"))
write.csv(cm_all_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2020_30_59.csv"))
write.csv(cm_all_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2021_30_59.csv"))
write.csv(cm_all_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2022_30_59.csv"))
write.csv(cm_all_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2021_30_59.csv"))
write.csv(cm_all_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2022_30_59.csv"))
write.csv(cm_all_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2021_2022_30_59.csv"))
# Save male comuna matrices 30-59
write.csv(cm_mle_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2019_30_59.csv"))
write.csv(cm_mle_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2020_30_59.csv"))
write.csv(cm_mle_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2021_30_59.csv"))
write.csv(cm_mle_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2022_30_59.csv"))
write.csv(cm_mle_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2020_30_59.csv"))
write.csv(cm_mle_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2021_30_59.csv"))
write.csv(cm_mle_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2022_30_59.csv"))
write.csv(cm_mle_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2021_30_59.csv"))
write.csv(cm_mle_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2022_30_59.csv"))
write.csv(cm_mle_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2021_2022_30_59.csv"))
# Save female comuna matrices 30-59
write.csv(cm_fml_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2019_30_59.csv"))
write.csv(cm_fml_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2020_30_59.csv"))
write.csv(cm_fml_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2021_30_59.csv"))
write.csv(cm_fml_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2022_30_59.csv"))
write.csv(cm_fml_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2020_30_59.csv"))
write.csv(cm_fml_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2021_30_59.csv"))
write.csv(cm_fml_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2022_30_59.csv"))
write.csv(cm_fml_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2021_30_59.csv"))
write.csv(cm_fml_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2022_30_59.csv"))
write.csv(cm_fml_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2021_2022_30_59.csv"))

# Save all provincia matrices 30-59
write.csv(pr_all_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2019_30_59.csv"))
write.csv(pr_all_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2020_30_59.csv"))
write.csv(pr_all_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2021_30_59.csv"))
write.csv(pr_all_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2022_30_59.csv"))
write.csv(pr_all_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2020_30_59.csv"))
write.csv(pr_all_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2021_30_59.csv"))
write.csv(pr_all_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2022_30_59.csv"))
write.csv(pr_all_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2021_30_59.csv"))
write.csv(pr_all_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2022_30_59.csv"))
write.csv(pr_all_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2021_2022_30_59.csv"))
# Save male provincia matrices 30-59
write.csv(pr_mle_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2019_30_59.csv"))
write.csv(pr_mle_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2020_30_59.csv"))
write.csv(pr_mle_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2021_30_59.csv"))
write.csv(pr_mle_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2022_30_59.csv"))
write.csv(pr_mle_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2020_30_59.csv"))
write.csv(pr_mle_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2021_30_59.csv"))
write.csv(pr_mle_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2022_30_59.csv"))
write.csv(pr_mle_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2021_30_59.csv"))
write.csv(pr_mle_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2022_30_59.csv"))
write.csv(pr_mle_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2021_2022_30_59.csv"))
# Save female provincia matrices 30-59
write.csv(pr_fml_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2019_30_59.csv"))
write.csv(pr_fml_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2020_30_59.csv"))
write.csv(pr_fml_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2021_30_59.csv"))
write.csv(pr_fml_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2022_30_59.csv"))
write.csv(pr_fml_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2020_30_59.csv"))
write.csv(pr_fml_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2021_30_59.csv"))
write.csv(pr_fml_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2022_30_59.csv"))
write.csv(pr_fml_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2021_30_59.csv"))
write.csv(pr_fml_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2022_30_59.csv"))
write.csv(pr_fml_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2021_2022_30_59.csv"))

# Save all region matrices 30-59
write.csv(rg_all_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2019_30_59.csv"))
write.csv(rg_all_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020_30_59.csv"))
write.csv(rg_all_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2021_30_59.csv"))
write.csv(rg_all_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2022_30_59.csv"))
write.csv(rg_all_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2020_30_59.csv"))
write.csv(rg_all_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2021_30_59.csv"))
write.csv(rg_all_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2022_30_59.csv"))
write.csv(rg_all_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2021_30_59.csv"))
write.csv(rg_all_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2022_30_59.csv"))
write.csv(rg_all_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2021_2022_30_59.csv"))
# Save male region matrices 30-59
write.csv(rg_mle_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2019_30_59.csv"))
write.csv(rg_mle_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2020_30_59.csv"))
write.csv(rg_mle_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2021_30_59.csv"))
write.csv(rg_mle_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2022_30_59.csv"))
write.csv(rg_mle_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2020_30_59.csv"))
write.csv(rg_mle_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2021_30_59.csv"))
write.csv(rg_mle_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2022_30_59.csv"))
write.csv(rg_mle_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2021_30_59.csv"))
write.csv(rg_mle_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2022_30_59.csv"))
write.csv(rg_mle_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2021_2022_30_59.csv"))
# Save female region matrices 30-59
write.csv(rg_fml_2018_2019_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2019_30_59.csv"))
write.csv(rg_fml_2018_2020_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2020_30_59.csv"))
write.csv(rg_fml_2018_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2021_30_59.csv"))
write.csv(rg_fml_2018_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2022_30_59.csv"))
write.csv(rg_fml_2019_2020_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2020_30_59.csv"))
write.csv(rg_fml_2019_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2021_30_59.csv"))
write.csv(rg_fml_2019_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2022_30_59.csv"))
write.csv(rg_fml_2020_2021_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2021_30_59.csv"))
write.csv(rg_fml_2020_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2022_30_59.csv"))
write.csv(rg_fml_2021_2022_30_59,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2021_2022_30_59.csv"))



# Save all comuna matrices 60 plus
write.csv(cm_all_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2019_60pls.csv"))
write.csv(cm_all_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2020_60pls.csv"))
write.csv(cm_all_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2021_60pls.csv"))
write.csv(cm_all_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2018_2022_60pls.csv"))
write.csv(cm_all_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2020_60pls.csv"))
write.csv(cm_all_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2021_60pls.csv"))
write.csv(cm_all_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2019_2022_60pls.csv"))
write.csv(cm_all_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2021_60pls.csv"))
write.csv(cm_all_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2020_2022_60pls.csv"))
write.csv(cm_all_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_all_participants_2021_2022_60pls.csv"))
# Save male comuna matrices 60 plus
write.csv(cm_mle_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2019_60pls.csv"))
write.csv(cm_mle_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2020_60pls.csv"))
write.csv(cm_mle_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2021_60pls.csv"))
write.csv(cm_mle_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2018_2022_60pls.csv"))
write.csv(cm_mle_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2020_60pls.csv"))
write.csv(cm_mle_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2021_60pls.csv"))
write.csv(cm_mle_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2019_2022_60pls.csv"))
write.csv(cm_mle_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2021_60pls.csv"))
write.csv(cm_mle_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2020_2022_60pls.csv"))
write.csv(cm_mle_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_male_participants_2021_2022_60pls.csv"))
# Save female comuna matrices 60 plus
write.csv(cm_fml_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2019_60pls.csv"))
write.csv(cm_fml_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2020_60pls.csv"))
write.csv(cm_fml_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2021_60pls.csv"))
write.csv(cm_fml_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2018_2022_60pls.csv"))
write.csv(cm_fml_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2020_60pls.csv"))
write.csv(cm_fml_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2021_60pls.csv"))
write.csv(cm_fml_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2019_2022_60pls.csv"))
write.csv(cm_fml_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2021_60pls.csv"))
write.csv(cm_fml_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2020_2022_60pls.csv"))
write.csv(cm_fml_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_comuna_level_migration_matrix_female_participants_2021_2022_60pls.csv"))

# Save all provincia matrices 60 plus
write.csv(pr_all_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2019_60pls.csv"))
write.csv(pr_all_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2020_60pls.csv"))
write.csv(pr_all_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2021_60pls.csv"))
write.csv(pr_all_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2018_2022_60pls.csv"))
write.csv(pr_all_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2020_60pls.csv"))
write.csv(pr_all_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2021_60pls.csv"))
write.csv(pr_all_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2019_2022_60pls.csv"))
write.csv(pr_all_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2021_60pls.csv"))
write.csv(pr_all_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2020_2022_60pls.csv"))
write.csv(pr_all_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_all_participants_2021_2022_60pls.csv"))
# Save male provincia matrices 60 plus
write.csv(pr_mle_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2019_60pls.csv"))
write.csv(pr_mle_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2020_60pls.csv"))
write.csv(pr_mle_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2021_60pls.csv"))
write.csv(pr_mle_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2018_2022_60pls.csv"))
write.csv(pr_mle_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2020_60pls.csv"))
write.csv(pr_mle_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2021_60pls.csv"))
write.csv(pr_mle_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2019_2022_60pls.csv"))
write.csv(pr_mle_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2021_60pls.csv"))
write.csv(pr_mle_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2020_2022_60pls.csv"))
write.csv(pr_mle_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_male_participants_2021_2022_60pls.csv"))
# Save female provincia matrices 60 plus
write.csv(pr_fml_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2019_60pls.csv"))
write.csv(pr_fml_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2020_60pls.csv"))
write.csv(pr_fml_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2021_60pls.csv"))
write.csv(pr_fml_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2018_2022_60pls.csv"))
write.csv(pr_fml_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2020_60pls.csv"))
write.csv(pr_fml_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2021_60pls.csv"))
write.csv(pr_fml_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2019_2022_60pls.csv"))
write.csv(pr_fml_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2021_60pls.csv"))
write.csv(pr_fml_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2020_2022_60pls.csv"))
write.csv(pr_fml_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_provincia_level_migration_matrix_female_participants_2021_2022_60pls.csv"))

# Save all region matrices 60 plus
write.csv(rg_all_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2019_60pls.csv"))
write.csv(rg_all_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020_60pls.csv"))
write.csv(rg_all_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2021_60pls.csv"))
write.csv(rg_all_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2022_60pls.csv"))
write.csv(rg_all_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2020_60pls.csv"))
write.csv(rg_all_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2021_60pls.csv"))
write.csv(rg_all_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2022_60pls.csv"))
write.csv(rg_all_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2021_60pls.csv"))
write.csv(rg_all_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2022_60pls.csv"))
write.csv(rg_all_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2021_2022_60pls.csv"))
# Save male region matrices 60 plus
write.csv(rg_mle_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2019_60pls.csv"))
write.csv(rg_mle_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2020_60pls.csv"))
write.csv(rg_mle_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2021_60pls.csv"))
write.csv(rg_mle_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2018_2022_60pls.csv"))
write.csv(rg_mle_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2020_60pls.csv"))
write.csv(rg_mle_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2021_60pls.csv"))
write.csv(rg_mle_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2019_2022_60pls.csv"))
write.csv(rg_mle_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2021_60pls.csv"))
write.csv(rg_mle_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2020_2022_60pls.csv"))
write.csv(rg_mle_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_male_participants_2021_2022_60pls.csv"))
# Save female region matrices 60 plus
write.csv(rg_fml_2018_2019_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2019_60pls.csv"))
write.csv(rg_fml_2018_2020_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2020_60pls.csv"))
write.csv(rg_fml_2018_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2021_60pls.csv"))
write.csv(rg_fml_2018_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2018_2022_60pls.csv"))
write.csv(rg_fml_2019_2020_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2020_60pls.csv"))
write.csv(rg_fml_2019_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2021_60pls.csv"))
write.csv(rg_fml_2019_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2019_2022_60pls.csv"))
write.csv(rg_fml_2020_2021_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2021_60pls.csv"))
write.csv(rg_fml_2020_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2020_2022_60pls.csv"))
write.csv(rg_fml_2021_2022_60pls,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_female_participants_2021_2022_60pls.csv"))
```



# Convert region all participants matrix to proportion so can be compared with Twitter data
```{r}
# Function that removes periods from matrix names
rmv_prds = function(df) { df %>% setNames( c("Origin", df %>% names() %>% gsub("\\."," ",.) %>% .[2:length(.)] ) ) }

# Function that calculates each od cell as a proportion of the total origin population (row total)
get_orgn_prp = function(mtr) {
  
  # For loop that calculates each row's od cells as a proportion of the total origin population (row total)
  for (row in 1:nrow(mtr)) {
    mtr[row,] = mtr[row,] / sum(mtr[row,])
  }
  
  # Return matrix
  return(mtr)
}

# Import region matrices
ms_rg_2018_2019 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2019.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2018_2020 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2020.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2018_2021 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2021.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2018_2022 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2018_2022.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2019_2020 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2020.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2019_2021 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2021.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2019_2022 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2019_2022.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2020_2021 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2021.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2020_2022 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2020_2022.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()
ms_rg_2021_2022 = read.csv(paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_all_participants_2021_2022.csv")) %>% rmv_prds() %>% column_to_rownames("Origin") %>% as.matrix()

# Create matrices where each od cell is a proportion of the total origin population (row total)
ms_rg_2018_2019_orgn_prp = ms_rg_2018_2019 %>% get_orgn_prp()
ms_rg_2018_2020_orgn_prp = ms_rg_2018_2020 %>% get_orgn_prp()
ms_rg_2018_2021_orgn_prp = ms_rg_2018_2021 %>% get_orgn_prp()
ms_rg_2018_2022_orgn_prp = ms_rg_2018_2022 %>% get_orgn_prp()
ms_rg_2019_2020_orgn_prp = ms_rg_2019_2020 %>% get_orgn_prp()
ms_rg_2019_2021_orgn_prp = ms_rg_2019_2021 %>% get_orgn_prp()
ms_rg_2019_2022_orgn_prp = ms_rg_2019_2022 %>% get_orgn_prp()
ms_rg_2020_2021_orgn_prp = ms_rg_2020_2021 %>% get_orgn_prp()
ms_rg_2020_2022_orgn_prp = ms_rg_2020_2022 %>% get_orgn_prp()
ms_rg_2021_2022_orgn_prp = ms_rg_2021_2022 %>% get_orgn_prp()

# Create matrix where each od cell is a proportion of the total matrix population
ms_rg_2018_2019_mtrx_prp = ms_rg_2018_2019 %>% {./sum(.)}
ms_rg_2018_2020_mtrx_prp = ms_rg_2018_2020 %>% {./sum(.)}
ms_rg_2018_2021_mtrx_prp = ms_rg_2018_2021 %>% {./sum(.)}
ms_rg_2018_2022_mtrx_prp = ms_rg_2018_2022 %>% {./sum(.)}
ms_rg_2019_2020_mtrx_prp = ms_rg_2019_2020 %>% {./sum(.)}
ms_rg_2019_2021_mtrx_prp = ms_rg_2019_2021 %>% {./sum(.)}
ms_rg_2019_2022_mtrx_prp = ms_rg_2019_2022 %>% {./sum(.)}
ms_rg_2020_2021_mtrx_prp = ms_rg_2020_2021 %>% {./sum(.)}
ms_rg_2020_2022_mtrx_prp = ms_rg_2020_2022 %>% {./sum(.)}
ms_rg_2021_2022_mtrx_prp = ms_rg_2021_2022 %>% {./sum(.)}

# Save proportion matrices
# Origin
write.csv(ms_rg_2018_2019_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2018_2019.csv"))
write.csv(ms_rg_2018_2020_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2018_2020.csv"))
write.csv(ms_rg_2018_2021_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2018_2021.csv"))
write.csv(ms_rg_2018_2022_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2018_2022.csv"))
write.csv(ms_rg_2019_2020_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2019_2020.csv"))
write.csv(ms_rg_2019_2021_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2019_2021.csv"))
write.csv(ms_rg_2019_2022_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2019_2022.csv"))
write.csv(ms_rg_2020_2021_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2020_2021.csv"))
write.csv(ms_rg_2020_2022_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2020_2022.csv"))
write.csv(ms_rg_2021_2022_orgn_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_origin_proportion_all_participants_2021_2022.csv"))
# Whole matrix
write.csv(ms_rg_2018_2019_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2018_2019.csv"))
write.csv(ms_rg_2018_2020_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2018_2020.csv"))
write.csv(ms_rg_2018_2021_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2018_2021.csv"))
write.csv(ms_rg_2018_2022_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2018_2022.csv"))
write.csv(ms_rg_2019_2020_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2019_2020.csv"))
write.csv(ms_rg_2019_2021_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2019_2021.csv"))
write.csv(ms_rg_2019_2022_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2019_2022.csv"))
write.csv(ms_rg_2020_2021_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2020_2021.csv"))
write.csv(ms_rg_2020_2022_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2020_2022.csv"))
write.csv(ms_rg_2021_2022_mtrx_prp,paste0(dp,mtp,msp,"msdf_region_level_migration_matrix_total_proportion_all_participants_2021_2022.csv"))
```
